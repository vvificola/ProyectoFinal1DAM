 /*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package classes;

import exceptions.CampoVacioException;
import exceptions.ContrasenaMuyCortaException;
import exceptions.ContrasenaMuyLargaException;
import exceptions.ContrasenaNoCoincideException;
import exceptions.EmailNoValidoException;
import exceptions.LongitudNombreIncorrectaException;
import exceptions.NombreVacioException;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.time.LocalDate;
import java.time.temporal.ChronoUnit;
import java.util.ArrayList;


import enums.IMCGradation;
import interfaces.PantallaRegistro;
import preferenceEnums.DietaryRestrictions;

/**Clase que modela el usuario del programa
 *
 * @author Cándido Vidal 
 */
public class User {

    private  String userName;
    private  String password;
    private  String email;
    private  String firstName;
    private  String lastName;
    private  String secondLastName;
    private boolean genre;
    private boolean halal;
    private boolean vegan;
    private boolean lowCarb;
    private boolean highProtein;
    private int height; //en centímetros
    private  int weight; //en centímetros
    private  LocalDate birthDate;
    private ArrayList<User> usuarios;
    private ArrayList<Product> favoriteProducts;
    private ArrayList<Recipe> favoriteRecipes;
    private  ArrayList<DietaryRestrictions> dietaryOptions = new ArrayList <DietaryRestrictions>();
    private ArrayList<Menu> savedMenu;
    private PantallaRegistro p;

    
    /**
     * Constructor de la clase Usuario 
     * @param userName el nick de usuario
     * @param password el password del usuario 
     * @param email el email del usuario 
     * @param firstName el nombre del usuario 
     * @param lastName el primer apellido del usuario 
     * @param secondLastName el segundo apellido del usuario 
     * @param genre el género del usuario 
     * @param height la altura del usuario 
     * @param weight el peso del usuario 
     * @param birthDate la fecha de nacimiento del usuario 
     * @param vegan booleano que devuelve true si el usuario lleva una dieta vegana o false si no lo es 
     * @param halal booleano que devuelve true si el usuario lleva una dieta halal false si no lo es 
     * @param highProtein booleano que devuelve true si el usuario lleva una dieta alta en proteínas o false si no lo es 
     * @param lowCarb booleano que devuelve true si el usuario lleva una dieta baja en carbohidratos o false si no lo es  
     */
    public User(String userName, String password, String email, String firstName, String lastName, String secondLastName, boolean genre, int height, int weight, LocalDate birthDate,
    		boolean halal, boolean vegan, boolean lowCarb, boolean highProtein) {
        this.userName = userName;
        this.password =password;
        this.email = email;
        this.firstName = firstName;
        this.lastName = lastName;
        this.secondLastName = secondLastName;
        this.genre = genre;
        this.height = height;
        this.weight = weight;
        this.birthDate = birthDate;
        this.halal=halal;
        this.vegan=vegan;
        this.lowCarb=lowCarb;
        this.setDietaryOptions(halal, vegan, lowCarb, highProtein);
        
    
    }
    /**
     * 
     * @param userName nombre de usuario 
     * @param password contraseña de usuario 
     * @param passwordConfirm confirmación de contraseña de usuario 
     * @throws ContrasenaMuyCortaException Excepcion que se lanza si la contraseña es demasiado corta
     * @throws ContrasenaMuyLargaException Excepcion que se lanza si la contraseña es demasiado larga
     * @throws ContrasenaNoCoincideException Excepcion que se lanza si la contraseña y la confiramción no coinciden 
     * @throws NombreVacioException  Excepcion que se lanza si el campo del nombre está vacío 
     * @throws LongitudNombreIncorrectaException  Excepcion que se lanza si la longitud del nombre elegido no cumple los criterios
     */
    public User(String userName, String password, String passwordConfirm) throws ContrasenaMuyCortaException, ContrasenaMuyLargaException, ContrasenaNoCoincideException, NombreVacioException, LongitudNombreIncorrectaException {
        this.setUserName(userName);
        this.setPassword(password, passwordConfirm);

    }
    
    /**
     * 
     * Función que calcula el IMC seguún los parámetros de peso y altura
     * 
     * @param weight peso introducido 
     * @param height altura introducida
     * @return el indice IMC
     */
    public float calculateIMC(int weight, int height) {
		
    	//pasando de centímetros a metros para hacer el cálculo correcto
		float imc =(100*100*weight)/(height*height); ;
		return imc;
    }
    
    /**
     * Función que calcula la tasa metabólica en función de los parámetros del usuario 
     * @param weight peso del usuario 
     * @param height altura del usuario 
     * @param genre género del usuario 
     * @param edad edad del usuario 
     * @return la tasa metabólica 
     */
    public float calculateMBI (int weight, int height, boolean genre, int edad) {
		float mbi = 0;
    	
    	if (genre) {
    		
    		mbi  = (float) ((10*weight) + (6.25*height) - (5*edad)+5);
    		
    	} else {
    		
    		mbi  = (float) ((10*weight) + (6.25*height) - (5*edad)-1615);
    	}
		
		
		
    	
    	return mbi;

    }
    
    /**
     * Función que calcula el rango del IMC 
     * @param imc el el índice de masa corporal 
     * @return  la tasa metabolica 
     */
    public IMCGradation gradeIMC(float imc) {
		 IMCGradation grade = null;
    	//aquí no puedo aplicar switch/case así que no htengo otro remedio que hacerlo con else if
    	
    	if (imc <18.5) {
    		grade = grade.UNDERWEIGHT;
    	
    	}else if (imc>=18.5 && imc<=24.9) {
    		grade = grade.NORMAL_WEIGHT;
    	
    	}else if (imc>24.9 && imc<=29.9) {
    		grade = grade.OVERWEIGHT;
    	
    	}else if (imc>=30 && imc<34.9) {
    		grade = grade.OBESE;
    	
    	}else if (imc>=34.9) {
    		grade = grade.EXTREMELY_OBESE;
    	
    	}
    	
    	System.out.println(grade);
    	return grade;
  
    	
    	}
    
    /**
     * Función que calcula la edad del usuario en función de su fecha de nacimiento
     * @param birthDate la fecha de nacimiento 
     * @return la edad actual 
     */
    public byte calculateAge (LocalDate birthDate) {
    	
    	 LocalDate today = LocalDate.now();   
    	 byte age = (byte) ChronoUnit.YEARS.between(birthDate, today); 
		 return age;
    	
    }
    
    /**
     * Función que genera los desayunos apropiados del usuario en función de sus parámetros 
     * @param u la instancia del usuario que usa el programa 
     * @return la ruta absoluta de las imágenes asociadas a los desayunos 
     */
    
    public String generateBreakfast (User u) {
    	String path = null;
    	String restriction = ""; 
    	ArrayList<DietaryRestrictions> dietary = u.getDietaryOptions();
    	
    	
    	for (int i = 0; i < dietary.size(); i++) {
			 restriction = dietary.get(i).toString();
		}
    	try {
			  Connection c = DriverManager.getConnection("jdbc:mysql://127.0.0.1:3306/esquematablasproyecto", 																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																																														
			  		"root", "UXa19661!");
			  Statement smt = c.createStatement();
			   
			  
			  switch (restriction) {
			  
			  case "HALAL":
			  ResultSet r = smt.executeQuery(
					  "select imagePath * from Recipe where style = 'BREAKFAST' and halal = true;"
					  
					  );
			 
			 while(r.next()){
				 path = r.getString("imagePath");
				 smt.close();
				 c.close();
				 break;
			 
			 }
			  case "VEGAN":
				  ResultSet v = smt.executeQuery(
						  "select imagePath * from Recipe where style = 'BREAKFAST' and vegan = true;"
						  
						  );
				 
				 while(v.next()){
					 path = v.getString("imagePath");
					 smt.close();
					 c.close();
					 break;
				 
				 }	   
			  case "HIGHPROTEIN":
				  ResultSet p = smt.executeQuery(
						  "select imagePath * from Recipe where style = 'BREAKFAST' and highProtein = true;"
						  
						  );
				 
				 while(p.next()){
					 path = p.getString("imagePath");
					 smt.close();
					 c.close();
					 break;
				 
				 }	     
			  case "LOWCARB":
				  ResultSet l = smt.executeQuery(
						  "select imagePath * from Recipe where style = 'BREAKFAST' and lowCarb = true;"
						  
						  );
				 
				 while(l.next()){
					 path = l.getString("imagePath");
					 smt.close();
					 c.close();
					 break;
				 
				 }  
				  
				  

			  }
			  
			  
			  
		} catch (SQLException e1) {
			// TODO Auto-generated catch block
			e1.printStackTrace();
    	
		}
		return path;
		}
 
    

    	
    
    //getter y setters
    /**
     * Función que devuelve el nombre del usuario 
     * 
     * @return el nombre del usuario 
     * @throws CampoVacioException  se lanza si el campo está vacío 
     */
    public String getUserName()  throws CampoVacioException{
        return userName;
    }

    
    /**
     * Función que establece el nombre del usuario 
     * @param userName el nombre del usuario 
     * @throws NombreVacioException se lanza si el campo está vacío 
     * @throws LongitudNombreIncorrectaException se lanza si la longitud es incorrecta 
     */
    public void setUserName(String userName) throws NombreVacioException, LongitudNombreIncorrectaException {
        if (userName.isBlank()){
           throw new NombreVacioException ("El nombre de usuario no puede estar vacío");
           
        } else if (userName.length()<3 || userName.length()>14){
            throw new LongitudNombreIncorrectaException ("La longitud del nombre no es correcta");

        }
        
        this.userName = userName;
    }
    /**
     * Función que obtiene el nombre del usuario 
     * @return el nombre del usuario 
     */
    public String getPassword() {
        return password;
    }
     /**
      * Función que establece el password del usuario 
      * @param password el password introducido 
      * @param confirmPassword la confirmación del password
      * @throws ContrasenaMuyCortaException se lanza si la contraseña es demasiado corta 
      * @throws ContrasenaMuyLargaException se lanza si la contraseña es demasiado larga
      * @throws ContrasenaNoCoincideException  se lanza si la contraseña ny la confirmación o coinciden 
      */
    public void setPassword(String password, String confirmPassword) throws ContrasenaMuyCortaException, ContrasenaMuyLargaException, ContrasenaNoCoincideException {
        if (password.length()< 8) {
            throw new ContrasenaMuyCortaException("La contraseña es demasiado corta");
        }  else if(password.length()>14) {
            throw new ContrasenaMuyLargaException("La contraseña es demasiado corta");
         
        } else if (!password.contentEquals(confirmPassword)) {
          throw new ContrasenaNoCoincideException("La contraseña es demasiado corta");

        } 
        this.password = password;
        
    }
   /**
    * función que obtiene el email del usuario 
    * @return el email del usuario 
    */
    public  String getEmail() {
        return email;
    }
    /**
     * Función que establece el email del usuario 
     * @param email el email del usuario 
     * @throws EmailNoValidoException se lanza si el formato de email no es correcto 
     */
    public  void setEmail(String email) throws EmailNoValidoException {
    	
    	if (!email.contains("@") || !email.contains(".")) {
          throw new EmailNoValidoException("No es un formato de mail correcto");
    	}
        this.email = email;
    }
    
    /**
     * Función que almacena las opciones dietarias del usario en un ArrayList
@param vegan booleano que devuelve true si el usuario es vegano o false si no lo es 
    * @param halal booleano que devuelve true si el usuario es halal false si no lo es 
    * @param highProtein booleano que devuelve true si el usuario elige dieta alta en proteínas o false si no lo es 
    * @param lowCarb booleano que devuelve true si el usuario elige dieta  baja en carbohidratos o false si no lo es 
     */
    public void setDietaryOptions(boolean halal,boolean vegan, boolean lowCarb, boolean highProtein) {
    	
    	if (halal) {
    		
    		dietaryOptions.add(DietaryRestrictions.HALAL);
  
    	} else if (vegan) {
    		dietaryOptions.add(DietaryRestrictions.VEGAN);
    		
    	} else if (lowCarb) {
    		dietaryOptions.add(DietaryRestrictions.LOWCARB);
    		
    	} else if (highProtein) {
    		
    		dietaryOptions.add(DietaryRestrictions.HIGHPROTEIN);
    	}
    	
       
    }
    
    /**
     * Función que obtiene el nombre del usuario 
     * @return el nombre del usuario 
     */
    public String getFirstName() {
        return firstName;
    }
     /**función que establece el nombre del usuario 
      * 
      * @param firstName el nombre del usuario 
      */
    public  void setFirstName(String firstName) {
        this.firstName = firstName;
    }
    /**
     * función que obtiene el primer apellido del usuario
     * @return  el primer apellido del usuario 
     */
    public String getLastName() {
        return lastName;
    }
    /**
     * fucnión que establece el apellido del usuario 
     * @param lastName el apellido del usuario 
     */
    public  void setLastName(String lastName) {
        this.lastName = lastName;
    }
    /**
     * función que obtiene el segundo  apellido del usuario
     * @return el segundo  apellido del usuario
     */
    public  String getSecondLastName() {
        return secondLastName;
    }
    /**función que establece el segundo apellido del usuario
     * 
     * @param secondLastName el segundo apellido del usuario
     */
    public void setSecondLastName(String secondLastName) {
        this.secondLastName = secondLastName;
    }
    /**
     * función que devuelve el genero del usario, true si hombre
     * @return el genero 
     */
    public  boolean isGenre() {
        return genre;
    }
   /**
    * función que define el género del usuario 
    * @param genre el género 
    */
    public  void setGenre(boolean genre) {
      this.genre = genre;
    }
    /**
     * función que obtiene la altura del usaurio 
     * @return la altura del usuario 
     */
    public int getHeight() {
        return height;
    }
     /**
      * función que establece la altura del usuario 
      * @param height la altura del usuario 
      */
    public  void setHeight(short height) {
       this.height = height;
    }
     /**
      * fucnión que obtiene el peso del usuario 
      * @return el peso del usuario 
      */
    public int getWeight() {
        return weight;
    }
     /**
      * función que establece el peso del usuario 
      * @param weight el peso del usuario 
      */
    public  void setWeight(short weight) {
        this.weight = weight;
    }
    /**Función que obtiene la fecha de naciomiento del usuario 
     * 
     * @return la fecha de nacimiento 
     */
    public LocalDate getBirthDate() {
        return birthDate;
    }
     /**función que establece la fecha de nacimiento del usuario 
      * 
      * @param birthDate la fecha de naciemiento del usuario 
      */
    public  void setBirthDate(LocalDate birthDate) {
        this.birthDate = birthDate;
    }
 

    public ArrayList<Product> getFavoriteProducts() {
        return favoriteProducts;
    }

    public void setFavoriteProducts(ArrayList<Product> favoriteProducts) {
        this.favoriteProducts = favoriteProducts;
    }

    public ArrayList<Recipe> getFavoriteRecipes() {
        return favoriteRecipes;
    }

    public void setFavoriteRecipes(ArrayList<Recipe> favoriteRecipes) {
        this.favoriteRecipes = favoriteRecipes;
    }

    public ArrayList<DietaryRestrictions> getDietaryOptions() {
        return dietaryOptions;
    }



    public boolean isHighProtein() {
		return highProtein;
	}

	public void setHighProtein(boolean highProtein) {
		this.highProtein = highProtein;
	}

	public boolean isHalal() {
		return halal;
	}

	public void setHalal(boolean halal) {
		this.halal = halal;
	}

	public boolean isVegan() {
		return vegan;
	}

	public void setVegan(boolean vegan) {
		this.vegan = vegan;
	}

	public boolean isLowCarb() {
		return lowCarb;
	}

	public void setLowCarb(boolean lowCarb) {
		this.lowCarb = lowCarb;
	}

	public void setHeight(int height) {
		this.height = height;
	}

	public ArrayList<Menu> getSavedMenu() {
        return savedMenu;
    }

    public void setSavedMenu(ArrayList<Menu> savedMenu) {
        this.savedMenu = savedMenu;
    }

    public PantallaRegistro getP() {
        return p;
    }

    public void setP(PantallaRegistro p) {
        this.p = p;
    }
    
    @Override
    public String toString (){
    return super.toString()+ firstName + lastName;
    
    }

}
